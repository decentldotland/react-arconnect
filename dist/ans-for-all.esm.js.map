{"version":3,"file":"ans-for-all.esm.js","sources":["../src/components/badge.jsx","../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\n\nimport { useAns } from '../';\n\nimport * as lang from '../en.json';\n\nexport const Default_Badge = () => {\n\n    //will replace later\n    const connector = lang.connector;\n\n    const {\n        walletConnected,\n        address,\n        ansData,\n        shortenAddress,\n        arconnectConnect,\n        arconnectDisconnect\n    } = useAns();\n\n    return (\n        <>\n            {(walletConnected && (\n                <>\n                    <div\n                        className=\"btn btn-outline btn-secondary btn-sm md:btn-md text-sm md:text-base normal-case\"\n                        onClick={arconnectDisconnect}\n                    >\n                        <span>\n                            {ansData?.currentLabel ? `${ansData?.currentLabel}.ar` : shortenAddress(address)}\n                        </span>\n                        {(ansData?.avatar === \"\") ?\n                            <div className=\"mx-auto rounded-full h-6 w-6 ml-2 btn-secondary border-[1px]\" style={{ backgroundColor: ansData?.address_color }}></div> :\n                            <div className=\"mx-auto rounded-full h-6 w-6 overflow-hidden ml-2 btn-secondary border-[1px]\" style={{ backgroundColor: ansData?.address_color }}>\n                                <img src={`https://arweave.net/${ansData?.avatar}`} alt=\"Profile\" width=\"100%\" height=\"100%\" />\n                            </div>}\n\n                    </div>\n                </>\n            )) || (\n                    <div\n                        className='btn btn-primary btn-sm md:btn-md text-sm md:text-base'\n                        onClick={arconnectConnect}\n                    >\n                        <img className='w-3.5 h-3.5 mr-3.5 md:w-4 md:h-4 md:mr-4' src=\"https://nanofuxion.ar.page/favicon.png\"></img> {(connector.login)}\n                    </div>\n                )}\n        </>\n    )\n}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// @flow \nimport * as React from 'react';\nimport { Default_Badge } from './components/badge';\n// import useConenctor from './components/arconnect_loader'\nimport './index.css';\nimport Swal from 'sweetalert2'\n// import { useTranslation } from 'react-i18next'\nimport { PermissionType } from 'arconnect';\n\nimport * as lang from './en.json';\n\nconst requiredPermissions: PermissionType[] = ['ACCESS_ADDRESS', 'ACCESS_ALL_ADDRESSES', 'SIGNATURE', 'SIGN_TRANSACTION', 'ACCESS_PUBLIC_KEY']\n\ntype Props = {\n    children: any;\n};\n\ninterface IANSContext {\n    walletConnected: boolean;\n    address: string;\n    ansData: {\n        address_color: string;\n        currentLabel: string;\n        avatar: string;\n    };\n    shortenAddress: (addr: any) => any;\n    arconnectConnect: () => Promise<void>;\n    arconnectDisconnect: () => Promise<void>;\n}\n\nexport const ANSContext = React.createContext<Partial<IANSContext>>({} as IANSContext);\n\n\nexport function useAns(): Partial<IANSContext> {\n    const UseANSContext: Partial<IANSContext> = React.useContext(ANSContext);\n\n    if (UseANSContext === null) {\n        throw new Error(\n            'useAns() can only be used inside of <AnsProvider />, ' +\n            'please declare it at a higher level.'\n        )\n    }\n\n    return UseANSContext;\n}\n\nexport const Badge = Default_Badge;\n\n//will replace later\nconst connector = lang.connector;\n\nexport const AnsProvider = (props: Props) => {\n\n    const [walletConnected, setWalletConnected] = React.useState(false)\n    const [address, setAddress] = React.useState(undefined)\n    const [ansData, setANSData] = React.useState(undefined)\n    // const { t } = useTranslation()\n\n    React.useEffect(() => {\n        // add ArConnect event listeners\n        window.addEventListener('arweaveWalletLoaded', walletLoadedEvent)\n        window.addEventListener('walletSwitch', walletSwitchEvent)\n        return () => {\n            // remove ArConnect event listeners\n            window.removeEventListener('arweaveWalletLoaded', walletLoadedEvent)\n            window.removeEventListener('walletSwitch', walletSwitchEvent)\n        }\n    })\n\n    // wallet address change event\n    // when the user switches wallets\n    const walletSwitchEvent = async (e) => {\n        setAddress(e.detail.address)\n        // setAddress(\"ljvCPN31XCLPkBo9FUeB7vAK0VC6-eY52-CS-6Iho8U\")\n        // setANSData(await getANSLabel(e.detail.address))\n    }\n\n    // ArConnect script injected event\n    const walletLoadedEvent = async () => {\n        try {\n            // connected, set address\n            // (the user can still be connected, but\n            // for this actions the \"ACCESS_ADDRESS\"\n            // permission is required. if the user doesn't\n            // have that, we still need to ask them to connect)\n            const addr = await getAddr()\n            setAddress(addr)\n            // setAddress(\"ljvCPN31XCLPkBo9FUeB7vAK0VC6-eY52-CS-6Iho8U\")\n            // setANSData(await getANSLabel(addr))\n            setWalletConnected(true)\n        } catch {\n            // not connected\n            setAddress(undefined)\n            setWalletConnected(false)\n        }\n    }\n\n    const installArConnectAlert = () => {\n        Swal.fire({\n            icon: \"warning\",\n            title: connector.swal.title,\n            text: connector.swal.text,\n            footer: `<a href=\"https://arconnect.io\" rel=\"noopener noreferrer\" target=\"_blank\">${connector.swal.footer}</a>`,\n            customClass: \"font-mono\",\n        })\n    }\n\n    const getAddr = () => window.arweaveWallet.getActiveAddress()\n\n    const shortenAddress = (addr) => {\n        if (addr) {\n            return addr.substring(0, 4) + '...' + addr.substring(addr.length - 4)\n        }\n        return addr\n    }\n\n    React.useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const response = await fetch(`https://ans-testnet.herokuapp.com/profile/${address}`)\n                const ans = await response.json()\n                const { address_color, currentLabel, avatar = \"\" } = ans;\n                console.log({ address_color, currentLabel, avatar })\n                setANSData({ address_color, currentLabel, avatar })\n            } catch (error) {\n                console.error(error)\n            }\n        };\n\n        fetchData();\n    }, [address]);\n\n    const arconnectConnect = async () => {\n        if (window.arweaveWallet) {\n            try {\n                await window.arweaveWallet.connect(requiredPermissions)\n                setAddress(await getAddr())\n                setWalletConnected(true)\n\n            } catch { }\n        } else {\n            installArConnectAlert()\n        }\n    }\n\n    const arconnectDisconnect = async () => {\n        await window.arweaveWallet.disconnect()\n        setWalletConnected(false)\n        setAddress(undefined)\n    }\n\n\n    return (\n        <ANSContext.Provider value={{ walletConnected, address, ansData, shortenAddress, arconnectConnect, arconnectDisconnect }}>\n            {props.children}\n        </ANSContext.Provider>\n    );\n};"],"names":["Default_Badge","connector","lang","useAns","walletConnected","address","ansData","shortenAddress","arconnectConnect","arconnectDisconnect","React.createElement","currentLabel","avatar","backgroundColor","address_color","login","requiredPermissions","ANSContext","React","UseANSContext","Error","Badge","AnsProvider","props","setWalletConnected","undefined","setAddress","setANSData","window","addEventListener","walletLoadedEvent","walletSwitchEvent","removeEventListener","e","detail","getAddr","addr","installArConnectAlert","Swal","fire","icon","title","swal","text","footer","customClass","arweaveWallet","getActiveAddress","substring","length","fetchData","fetch","response","json","ans","console","log","error","connect","disconnect","children"],"mappings":"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"}